#!/bin/ksh

#
# ESMF 3
#
if [[ $1 = 3_wcoss ]]; then
     set -x
     cp conf/configure.nems.Wcoss.intel conf/configure.nems
     cp conf/modules.nems.wcoss_ESMF_3 conf/modules.nems
     cp ESMFVersionDefine_ESMF_3.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 3.1.0rp2 library on wcoss"
elif [[ $1 = 3_zeus ]]; then
     set -x
     cp conf/configure.nems.Zeus.intel_12 conf/configure.nems
     cp conf/modules.nems.Zeus_ESMF_310rAPI conf/modules.nems
     cp ESMFVersionDefine_ESMF_3.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 3.1.0r series library on zeus"
elif [[ $1 = 3_gaea ]]; then
     set -x
     cp conf/configure.nems.Gaea.intel conf/configure.nems
     cp ESMFVersionDefine_ESMF_3.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 3.1.0rp5 library on gaea"
elif [[ $1 = 3_yellowstone ]]; then
     set -x
     cp conf/configure.nems.Yellowstone.intel conf/configure.nems
     cp ESMFVersionDefine_ESMF_3.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 3.1.0rp2 library on yellowstone"

#
# ESMF 6
#
elif [[ $1 = 6.3r_nmm_wcoss ]]; then
     set -x
     cp conf/configure.nems.Wcoss.intel_ESMF_630r_nmm conf/configure.nems
     cp conf/modules.nems.wcoss_ESMF_630rAPI_nmm conf/modules.nems
     cp ESMFVersionDefine_ESMF_630rAPI.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 6.3.0r library"
elif [[ $1 = 6.3r_gsm_wcoss ]]; then
     set -x
     cp conf/configure.nems.Wcoss.intel_ESMF_630r_gsm conf/configure.nems
     cp conf/modules.nems.wcoss_ESMF_630rAPI_gsm conf/modules.nems
     cp ESMFVersionDefine_ESMF_630rAPI.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 6.3.0r library"
elif [[ $1 = 6_nmm_zeus ]]; then
     set -x
     cp conf/configure.nems.Zeus.intel_12 conf/configure.nems
     cp conf/modules.nems.Zeus_ESMF_630rAPI_nmm conf/modules.nems
     cp ESMFVersionDefine_ESMF_630rAPI.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 6.3.0r series library on zeus"
elif [[ $1 = 6_gsm_zeus ]]; then
     set -x
     cp conf/configure.nems.Zeus.intel_13 conf/configure.nems
     cp conf/modules.nems.Zeus_ESMF_630rAPI_gsm conf/modules.nems
     cp ESMFVersionDefine_ESMF_630rAPI.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 6.3.0r series library on zeus"

elif [[ $1 = dell ]]; then
     set -x
     cp conf/configure.nems.dell.intel conf/configure.nems
     cp conf/modules.nems.dell.intel conf/modules.nems
     cp ESMFVersionDefine_ESMF_630rAPI.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 7.1.0r series library on dell"


#
# NUOPC
#
elif [[ $1 = nuopc_zeus ]]; then
     set -x
     cp conf/configure.nems.Zeus.intel conf/configure.nems
     cp conf/modules.nems.Zeus_ESMF_NUOPC conf/modules.nems
     cp ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF library with reference NUOPC Layer (currently ESMF 7.0.0 beta snapshot)"
elif [[ $1 = nuopc_gaea ]]; then
     set -x
     cp conf/configure.nems.Gaea.intel conf/configure.nems
     cp conf/modules.nems.Gaea_ESMF_NUOPC conf/modules.nems
     cp ESMFVersionDefine_ESMF_NUOPC.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF library with reference NUOPC Layer (currently ESMF 7.0.0 beta snapshot)"

#
# tacc,savoy,mic, ...
#
elif [[ $1 = tacc ]]; then
     set -x
     cp conf/configure.nems.tacc.ifort conf/configure.nems
     cp ESMFVersionDefine_ESMF_3.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 3.1.0rp5 series library"
elif [[ $1 = savoy ]]; then
     set -x
     cp conf/configure.nems.savoy.ifort conf/configure.nems
#     cp ESMFVersionDefine_ESMF_3.h ESMFVersionDefine.h
     cp ESMFVersionDefine_ESMF_630rAPI.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 630r series library"
elif [[ $1 = savoy-mic ]]; then
     set -x
     cp conf/configure.nems.savoy.ifort-mic conf/configure.nems
     cp ESMFVersionDefine_ESMF_3.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 3.1.0rp5 series library"
elif [[ $1 = savoy-mic-esmf-7 ]]; then
     set -x
     cp conf/configure.nems.savoy.ifort-mic.esmf7 conf/configure.nems
     cp ESMFVersionDefine_ESMF_630rAPI.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 7.0.0 series library"

elif [[ $1 = tacc-mic ]]; then
     set -x
     cp conf/configure.nems.tacc.ifort-mic conf/configure.nems
     cp ESMFVersionDefine_ESMF_3.h ESMFVersionDefine.h
     set +x
     echo "Use an ESMF 3.1.0rp5 series library"

#
# help message
#
else
     echo;echo "     Run ./configure with one argument:"
     echo;
     echo " 'configure 3_wcoss'            : ESMF 3.1.0rp2 library on wcoss"
     echo " 'configure 3_zeus'             : ESMF 3.1.0r series library (i.e. ESMF 3.1.0rp2, 3.1.0rp5) on zeus"
     echo " 'configure 3_gaea'             : ESMF 3.1.0rp2 library on gaea"
     echo " 'configure 3_yellowstone'      : ESMF 3.1.0rp2 library on yellowstone"
     echo;
     echo " 'configure 6.3r_nmm_wcoss'     : ESMF 6.3.0r library on wcoss for nmm"
     echo " 'configure 6.3r_gsm_wcoss'     : ESMF 6.3.0r library on wcoss for gsm"
     echo " 'configure dell'               : ESMF 7.1.0r library on dell"
     echo " 'configure 6_nmm_zeus'         : ESMF 6.3.0r series library on zeus nmm"
     echo " 'configure 6_gsm_zeus'         : ESMF 6.3.0r series library on zeus gsm"
     echo;
     echo " 'configure nuopc_zeus'         : ESMF library with reference NUOPC Layer (currently ESMF 7.0.0 beta snapshot) on zeus"
     echo " 'configure nuopc_gaea'         : ESMF library with reference NUOPC Layer (currently ESMF 7.0.0 beta snapshot) on gaea"
     echo;
fi
