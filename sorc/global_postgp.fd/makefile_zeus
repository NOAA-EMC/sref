SHELL	=/bin/sh
INCMOD	=/contrib/nceplibs/nwprod/lib/incmod/sigio_v1.0.1
SRCM	=postgp.f90
INCM	=
SRCSP	=postgp_module.f90 funcphys.f90 mptran.f90 physcons_v.f90 machine.f90
OBJSP	=postgp_module.o funcphys.o mptran.o physcons_v.o machine.o
SRCSS	=postgp_module.f90 funcphys.f90 mptran.std.f90 physcons_v.f90 machine.f90
OBJSS	=postgp_module.o funcphys.o mptran.std.o physcons_v.o machine.o
MODS	=postgp_module.mod funcphys.mod
FCP	=ifort
FCS	=ifort
OPTS	= -O -fp-model strict
FREE	= -FR
TRAPS	= #-g -fno-inline -no-ip -traceback -ftrapuv -fpe0 -ftz -check all -check noarg_temp_created -fp-stack-check
DEBUG	= -g -traceback
FFLAGS	= $(OPTS) $(FREE) $(TRAPS) $(DEBUG)
LDFLAGS	= -openmp
LIBS	=-L/contrib/nceplibs/nwprod/lib -lsigio_v1.0.1_4 -lbacio_4 -lw3nco_v2.0.3_4 -lw3emc_v2.0.3_4 -lip_4 -lsp_4
CMDP	=global_postgp
CMDS	=global_postgs
both:	$(CMDP) $(CMDS)
$(CMDP):	$(SRCM) $(INCM) $(OBJSP)
	$(FCP) -I $(INCMOD) $(FFLAGS) $(LDFLAGS) $(SRCM) $(OBJSP) $(LIBS) -o $(CMDP)
$(CMDS):	$(SRCM) $(INCM) $(OBJSS)
	$(FCS) -I $(INCMOD) $(FFLAGS) $(LDFLAGS) $(SRCM) $(OBJSS) $(LIBS) -o $(CMDS)
postgp_module.o:	postgp_module.f90
	$(FCS) $(FFLAGS) -c postgp_module.f90
funcphys.o:	funcphys.f90 physcons_v.o machine.o
	$(FCS) $(FFLAGS) -c funcphys.f90
physcons_v.o:	physcons_v.f90 machine.o
	$(FCS) $(FFLAGS) -c physcons_v.f90
machine.o:	machine.f90
	$(FCS) $(FFLAGS) -c machine.f90
mptran.o:	mptran.f90 machine.o
	$(FCP) $(FFLAGS) -c mptran.f90
mptran.std.o:	mptran.std.f90 machine.o
	$(FCS) $(FFLAGS) -c mptran.std.f90
clean:
	-rm -f $(OBJS) $(MODS)
clobber:        clean
	-rm -f $(CMD)
void:   clobber
	-rm -f $(SRCS) $(SRCM) $(INCM) makefile
